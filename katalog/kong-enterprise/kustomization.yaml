apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization
bases:
  - ../kong-db

images:
  - name: kong
    newName: kong-docker-kong-enterprise-edition-docker.bintray.io/kong-enterprise-edition
    newTag: 1.5.0.2-alpine

patchesStrategicMerge:
  - kong-ingress-ds.yml
  - kong-migrations-job.yml

secretGenerator:
  - name: kong-settings
    namespace: kong
    behavior: replace
    envs:
      - kong-settings.env
  - name: kong-enterprise-license
    namespace: kong
    files:
      - license.json
  - name: kong-enterprise-docker-secrets
    namespace: kong
    files:
      - .dockerconfig.json
    type: kubernetes.io/dockerconfigjson
